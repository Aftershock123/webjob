<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/css/style.css">
    <style>
    .gradient-custom {
      /* fallback for old browsers */
      background: #f6d365;
      
      /* Chrome 10-25, Safari 5.1-6 */
      background: -webkit-linear-gradient(to right bottom, rgba(246, 211, 101, 1), rgba(253, 160, 133, 1));
      
      /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
      background: linear-gradient(to right bottom, rgba(246, 211, 101, 1), rgba(253, 160, 133, 1))
      
      }
      .colorless-input {
  background-color: transparent;
  border: none;
}
.border-custom {
  margin-top: 9px;
  margin-bottom: 9px;
  text-align-last: center;
  padding-top: 2px;
  padding-bottom: 2px;
  border: 2px solid rgb(0, 0, 0); /* Change the border style and color as needed */
  border-radius: 5px; /* Optional: Add rounded corners */
}
.label-profile{
  width: 117px;
  padding-top: 7px;
height: 35px;
flex-shrink: 0;
background: #f6d365;
text-align-last: center;
}
.input-mid{
  padding-left:35px ;
  margin-bottom: 10px;
}
.form-control-input {
 
  padding: 10px; /* Add some padding */
  margin: 5px 0; /* Add margin at the top and bottom */
  box-sizing: border-box; /* Include padding and border in the element's total width and height */
  border: 1px solid #981818; /* Add a border */
  border-radius: 4px; /* Add rounded corners */
}

/* Style for when the input is focused */
.form-control-input {
  border-color: #007BFF; /* Change border color when focused */
}

</style>
</head>

<body>

  <%- include('navbar') %>
  
<!-- 
  <form class="profile" action="/user/updateprofile/<%= user.id_user %>" method="post" enctype="multipart/form-data">

  <section class="vh-100" style="background-color: #eeeeee;">
    <div class="container py-5 h-100">
      <p class="label-profile">Profile</p>
      <div class="row d-flex justify-content-center align-items-center h-100 ">
        <div class="col col-lg-8 mb-6 mb-lg-0 ">
          <div class="card mb-3" style="border-radius: .5rem;">
            <div class="row g-0">
              <div class="col-md-4 gradient-custom text-center text-white"
                style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem;">
                <img src="/image/<%= user.image %>" 
                alt="Avatar" class="img-fluid my-5 rounded-circle" style="width: 100px; height: 100px;" />
                <input type="file" id="image" name="image" accept="image/*" onchange="displayImage(event)" class="input-mid">
                
                 <input type="text" id="username" name="username" class="colorless-input border-custom"  value="<%= user.username %>" />
                
                 <button type="submit" class="btn btn-colorless">
                  <i class="far fa-edit"></i> Submit
                </button>
              </div>
              <div class="col-md-8">
                <div class="card-body p-4">
                  <h6>Information</h6>
                  <hr class="mt-0 mb-4">
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Email</h6>
                      <input type="email" id="email" name="email" value="<%= user.email %>" />
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Phone</h6>
                      <p class="text-muted">123 456 789</p>
                    </div>
                  </div>
                  <h6>Projects</h6>
                  <hr class="mt-0 mb-4">
                  <div class="row pt-1">
                    <div class="col-6 mb-3">
                      <h6>Recent</h6>
                      <p class="text-muted">Lorem ipsum</p>
                    </div>
                    <div class="col-6 mb-3">
                      <h6>Most Viewed</h6>
                      <p class="text-muted">Dolor sit amet</p>
                    </div>
                  </div>
                  <div class="d-flex justify-content-start">
                    <a href="#!"><i class="fab fa-facebook-f fa-lg me-3"></i></a>
                    <a href="#!"><i class="fab fa-twitter fa-lg me-3"></i></a>
                    <a href="#!"><i class="fab fa-instagram fa-lg"></i></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</form> -->

<section style="background-color: #eeeeee; height: 100%;">
<form   action="/user/updateprofile/<%= user.id_user %>" method="post" enctype="multipart/form-data">

    <div class="container py-5 h-100">
      <p class="label-profile"><b>Profile</b></p>
      <div class="row d-flex justify-content-center align-items-center h-100 ">
        <div class="col col-lg-6 mb-4 mb-lg-0 ">
          <div class="card mb-3" style="border-radius: .5rem;">
            <div class="row g-0">
              <div class="col-md-5 gradient-custom text-center text-white"
                style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem;">
                <img src="/image/<%= user.image %>" 
                alt="Avatar" class="img-fluid my-5 rounded-circle" style="width: 100px; height: 100px;" />
                <input type="file" id="image" name="image" accept="image/*" onchange="displayImage(event)" class="input-mid">
                
                
                
                 <button type="submit" class="btn btn-colorless ">
                  <i class="far fa-edit"></i> Submit
                </button>
              </div>
              <div class="col-md-5">
                <div class="card-body p-4">
                  <h6>Information</h6>
                  <hr class="mt-0 mb-4">
                  <div class="row pt-1">
                    <div class="col-6 mb-3 ">
                      <h6>Username</h6>
                       <input type="text" id="username" name="username"  class="form-control-input"  value="<%= user.username %>" />
                    </div>
                </div>
                <div class="row pt-1">
                  <div class="col-6 mb-3">
                    <h6>Email</h6>
                    <input type="email" id="email" name="email" class="form-control-input"  value="<%= user.email %>" />
                  </div>
                  
                 
                
               
              </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    
  </form>
  
  
  <% if (history=='undefined' || history==null || resume==='undefined' || resume===null) { %>

    <%}else {%>
      <p class="label-profile">Job sended</p>
      <div class="container">
        <div class="row">
      <% if (history.length> 0) { %>
        <% history.forEach((historyItem)=> { %> <!-- Added ( before historyItem -->
                    <div class="col-md-3">
                      <div class="card" style="width: 18rem; margin-top: 50px">
                        <img src="/image/<%= historyItem.image %>"  class="card-img-top" alt="...">
                        <div class="card-body">
                          <!-- <h5 class="card-title"><%= historyItem.idjob_company %></h5> -->
                          <h4 class="card-title"><%= historyItem.name_company %></h4>
                          <h5 class="card-title"><%= historyItem.name_job %></h5>
                          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                        </div>
                      </div>
                    </div>
          <% }); %> <!-- Corrected the location of closing }); -->
            <% } %>
              <% } %>

  
</section>



                

                  <script>
                    function displayImage(event) {
                      const imagePreview = document.getElementById('imagePreview');
                      const file = event.target.files[0];

                      if (file) {
                        const reader = new FileReader();

                        reader.onload = function (e) {
                          imagePreview.src = e.target.result;
                        }

                        reader.readAsDataURL(file);
                      } else {
                        if (user) {
                          imagePreview.src = '/image/<%= user.image %>'; // Set default image
                        }

                      }
                    }

                  </script>


</div>

</body>

</html>